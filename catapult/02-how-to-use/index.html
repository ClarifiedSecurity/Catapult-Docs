
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../01-installation/">
      
      
        <link rel="next" href="../03-how-to-customize/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.9">
    
    
      
        <title>How to use - Catapult Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.f2e4d321.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-use" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Catapult Docs" class="md-header__button md-logo" aria-label="Catapult Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Catapult Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              How to use
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Catapult Docs" class="md-nav__button md-logo" aria-label="Catapult Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Catapult Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Enter the Catapult
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Catapult
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Catapult
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    How to use
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    How to use
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#enter-the-catapult" class="md-nav__link">
    <span class="md-ellipsis">
      Enter the Catapult
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-commands" class="md-nav__link">
    <span class="md-ellipsis">
      General commands
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploy commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ctp-deploy" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-deploy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-redeploy" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-redeploy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-deploy-until-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-deploy-until-configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-redeploy-until-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-redeploy-until-configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-deploy-from-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-deploy-from-configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-deploy-role" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-deploy-role
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-deploy-network" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-deploy-network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-deploy-fresh" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-deploy-fresh
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-remove" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-remove
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-rebuild-linode-vm" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-rebuild-linode-vm
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-commands-based-on-startretry-file" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy commands based on @start.retry file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snapshot-modes" class="md-nav__link">
    <span class="md-ellipsis">
      Snapshot modes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Snapshot modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ctp-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-snapshot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-clean-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-clean-snapshot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-live-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-live-snapshot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-revert" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-revert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-remove-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-remove-snapshot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-remove-all-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-remove-all-snapshot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-rename-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-rename-snapshot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#power-state" class="md-nav__link">
    <span class="md-ellipsis">
      Power state
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Power state">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ctp-poweron" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-poweron
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-restart" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-restart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-poweroff" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-poweroff
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-reset" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-reset
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#misc-commands" class="md-nav__link">
    <span class="md-ellipsis">
      MISC commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MISC commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ctp-update-os" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-update-os
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-list" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-list-vars" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-list-vars
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-rename-vm" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-rename-vm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-get-ip" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-get-ip
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-how-to-customize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to customize
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-template-requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VM Template Requirements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../90-set-up-keepass/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KeePassXC setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../91-generate-ssh-keypair/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate SSH keys
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../92-contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing guidelines
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Catapult customizer
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Catapult customizer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../catapult-customizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Catapult Customizer Example
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Nova core collection
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Nova core collection
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/accounts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/caddy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    caddy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/cleanup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/configure_networking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    configure_networking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/configure_package_mirrors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    configure_package_mirrors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/connection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    connection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/customization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    customization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/customization_post_vm_role/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/customization_pre_role/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    customization_pre_role
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/customization_pre_vm_role/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/customization_single_role/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/deploy_vars/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/expo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    expo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/finalize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/gather_facts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/generate_credentials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/get_ip/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    get_ip
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/join_domain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    join_domain
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/linux_xrdp_keyboard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/linux_xrdp_server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    linux_xrdp_server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/machine_operations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/nexus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nexus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/os_configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    os_configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/outline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    outline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/powerstate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/providentia/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Providentia
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/rename_vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rename_vm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/secrets_to_vault/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    save_secrets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/snapshots/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/template_os_configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    template_os_configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/trusted_certificates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    trusted_certificates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/updates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    updates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/vault/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vault
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/vcenter_vmtools_policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/win_configure_rdp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    win_configure_rdp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/win_dc_post_reboot_check/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    win_dc_post_reboot_check
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nova-core-collection/win_sysprep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    win_sysprep
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#enter-the-catapult" class="md-nav__link">
    <span class="md-ellipsis">
      Enter the Catapult
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-commands" class="md-nav__link">
    <span class="md-ellipsis">
      General commands
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploy commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ctp-deploy" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-deploy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-redeploy" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-redeploy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-deploy-until-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-deploy-until-configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-redeploy-until-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-redeploy-until-configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-deploy-from-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-deploy-from-configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-deploy-role" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-deploy-role
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-deploy-network" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-deploy-network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-deploy-fresh" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-deploy-fresh
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-remove" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-remove
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-rebuild-linode-vm" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-rebuild-linode-vm
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-commands-based-on-startretry-file" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy commands based on @start.retry file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snapshot-modes" class="md-nav__link">
    <span class="md-ellipsis">
      Snapshot modes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Snapshot modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ctp-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-snapshot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-clean-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-clean-snapshot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-live-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-live-snapshot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-revert" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-revert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-remove-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-remove-snapshot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-remove-all-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-remove-all-snapshot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-rename-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-rename-snapshot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#power-state" class="md-nav__link">
    <span class="md-ellipsis">
      Power state
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Power state">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ctp-poweron" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-poweron
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-restart" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-restart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-shutdown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-poweroff" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-poweroff
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-reset" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-reset
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#misc-commands" class="md-nav__link">
    <span class="md-ellipsis">
      MISC commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MISC commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ctp-update-os" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-update-os
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-list" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-list-vars" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-list-vars
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-rename-vm" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-rename-vm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctp-get-ip" class="md-nav__link">
    <span class="md-ellipsis">
      ctp-get-ip
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="how-to-use">How to use</h1>
<p>Catapult's commands fall into two categories:</p>
<ul>
<li>External commands - All commands that start with <code>make</code> are external commands and are used to manage the Catapult container itself.</li>
<li>Internal commands - All commands that start with <code>ctp-</code> are internal commands and are used when the user is inside the Catapult container. You can use tab completion to see all available commands.</li>
</ul>
<h2 id="enter-the-catapult">Enter the Catapult</h2>
<ul>
<li>Start the Catapult container and connect to it with:</li>
</ul>
<pre><code class="language-sh">make start
</code></pre>
<ul>
<li>Connect to an already started Catapult container with:</li>
</ul>
<pre><code class="language-sh">make shell
</code></pre>
<h2 id="general-commands">General commands</h2>
<ul>
<li>Lists all available projects under /srv/inventories and allows you to select one if there is only one project the command will select it automatically. The command looks for projects that contain .git folder. If you are not using git for your project you can create an empty .git folder to make the project selectable.</li>
</ul>
<pre><code class="language-zsh">ctp-select-project
</code></pre>
<h2 id="deploy-commands">Deploy commands</h2>
<p>Examples for the deploy commands are done with one machine but you can use the same commands with multiple machines by using the <code>all</code> keyword or a group_var. Use Ansible's documentation for <a href="https://docs.ansible.com/ansible/latest/user_guide/intro_patterns.html">Advanced deploy patterns</a></p>
<h3 id="ctp-deploy">ctp-deploy</h3>
<p>Run the full playbook and creates the VM if it doesn't exist</p>
<p><em>Example usage:</em></p>
<ul>
<li>Deploys the VM with the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-deploy &lt;inventory_hostname&gt;
</code></pre>
<h3 id="ctp-redeploy">ctp-redeploy</h3>
<p>Destroys the existing VM and runs the the <code>ctp-deploy</code> command</p>
<p><em>Example usage:</em></p>
<ul>
<li>Redeploys the VM with the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-redeploy &lt;inventory_hostname&gt;
</code></pre>
<h3 id="ctp-deploy-until-configuration">ctp-deploy-until-configuration</h3>
<p>Deploys the machine, stops the play after os_configuration role and creates a snapshot. This is a useful command if you want to create a snapshot of the VM after the OS is installed and configured. You can then use the snapshot to speed up the deployment/development process. You can deploy multiple machines that depend on each other in parallel and use the <code>ctp-deploy-from-configuration</code> to configure them in the correct order afterwards.</p>
<p><em>Example usage:</em></p>
<ul>
<li>Deploys the VM with the given inventory_hostname and creates a snapshot</li>
</ul>
<pre><code class="language-zsh">ctp-deploy-until-configuration &lt;inventory_hostname&gt;
</code></pre>
<h3 id="ctp-redeploy-until-configuration">ctp-redeploy-until-configuration</h3>
<p>Redeploys the machine, stops the play after os_configuration role and creates a snapshot. This is a useful command if you want to create a snapshot of the VM after the OS is installed and configured. You can then use the snapshot to speed up the deployment/development process. You can deploy multiple machines that depend on each other in parallel and use the <code>ctp-deploy-from-configuration</code> to configure them in the correct order afterwards.</p>
<p><em>Example usage:</em></p>
<ul>
<li>Redeploys the VM with the given inventory_hostname and creates a snapshot</li>
</ul>
<pre><code class="language-zsh">ctp-redeploy-until-configuration &lt;inventory_hostname&gt;
</code></pre>
<h3 id="ctp-deploy-from-configuration">ctp-deploy-from-configuration</h3>
<p>Starts the play from <code>/srv/&lt;project_name&gt;/pre_vm_role part</code> of the playbook and runs until the end. This is a useful command during mass deploy when you have run the <code>ctp-deploy-until-configuration</code> first and then you want to configure the cloned machines. Should anything go wrong you can always revert to the snapshot and start again.</p>
<p><em>Example usage:</em></p>
<ul>
<li>Starts configuring the VM with the given inventory_hostname from the pre_vm_role.</li>
</ul>
<pre><code class="language-zsh">ctp-deploy-from-configuration &lt;inventory_hostname&gt;
</code></pre>
<h3 id="ctp-deploy-role">ctp-deploy-role</h3>
<p>Runs only the <code>/srv/&lt;project_name&gt;/vm/&lt;role_name&gt;</code> part of the playbook and then stops. This is a useful during role developing and or when you want to minimize the time it takes to configure something. For an example only reconfiguring the user accounts of the machine by using single_role with <code>nova.core.accounts</code> role.</p>
<p><em>Example usage:</em></p>
<ul>
<li>Only runs the role for inventory_hostname and then stops the play can also be used against all or group_var</li>
</ul>
<pre><code class="language-zsh">ctp-deploy-role &lt;inventory_hostname&gt;
</code></pre>
<ul>
<li>Looks for role under defined path and only runs that and stops</li>
</ul>
<pre><code class="language-zsh">ctp-deploy-role &lt;inventory_hostname&gt; -e single_role=path/to/role
</code></pre>
<ul>
<li>Looks for role with the fully qualified role name (FQCN) in the installed collections and only runs that and stops</li>
</ul>
<pre><code class="language-zsh">ctp-deploy-role &lt;inventory_hostname&gt; -e single_role=&lt;role.fqcn&gt;
</code></pre>
<h3 id="ctp-deploy-network">ctp-deploy-network</h3>
<p>Runs ctp-deploy and also includes networks configuration role</p>
<p><em>Example usage:</em></p>
<ul>
<li>Deploys the VM with the given inventory_hostname and also configures the networks</li>
</ul>
<pre><code class="language-zsh">ctp-deploy-network &lt;inventory_hostname&gt;
</code></pre>
<h3 id="ctp-deploy-fresh">ctp-deploy-fresh</h3>
<p>Runs deploy as if the machine does not exist. This can be useful when deploy has failed before configuring accounts. Use this command to deploy the machine again as if it didn't exist and thus use the default values for the accounts.</p>
<p><em>Example usage:</em></p>
<ul>
<li>Deploys the VM with the given inventory_hostname as if it didn't exist</li>
</ul>
<pre><code class="language-zsh">ctp-deploy-fresh &lt;inventory_hostname&gt;
</code></pre>
<h3 id="ctp-remove">ctp-remove</h3>
<p>Destroys the existing VM</p>
<p><em>Example usage:</em></p>
<ul>
<li>Destroys the VM with the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-remove &lt;inventory_hostname&gt;
</code></pre>
<h3 id="ctp-rebuild-linode-vm">ctp-rebuild-linode-vm</h3>
<p>Rebuilds the existing Linode VM with a new disk but keeps the existing IP</p>
<p><em>Example usage:</em></p>
<ul>
<li>Rebuilds the VM with the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-rebuild-linode-vm &lt;inventory_hostname&gt;
</code></pre>
<h2 id="deploy-commands-based-on-startretry-file">Deploy commands based on @start.retry file</h2>
<p>Whenever a deploy fails a start.retry file is created under <code>/srv/inventories/&lt;project_name&gt;/start.retry</code>. Instead of going trough the logs to find what machines failed you can use the following commands to deploy only the failed machines. Keep in mind that only that latest fail is written into the start.retry file so when running multiple instances of Catapult (using <code>make shell</code> multiple times) and multiple deploys in parallel the latest fail will be written into the start.retry file.</p>
<ul>
<li>Run <code>ctp-deploy</code> on failed machines based on start.retry file</li>
</ul>
<pre><code class="language-zsh">ctp-retry-deploy
</code></pre>
<ul>
<li>Run <code>ctp-redeploy</code> failed machines based on start.retry file</li>
</ul>
<pre><code class="language-zsh">ctp-retry-redeploy
</code></pre>
<ul>
<li>Runs <code>ctp-deploy-until-configuration</code> on failed machines based on start.retry file</li>
</ul>
<pre><code class="language-zsh">ctp-retry-deploy-until-configuration
</code></pre>
<ul>
<li>Runs <code>ctp-redeploy-until-configuration</code> on failed machines based on start.retry file</li>
</ul>
<pre><code class="language-zsh">ctp-retry-redeploy-until-configuration
</code></pre>
<ul>
<li>Run <code>ctp-deploy-from-configuration</code> on failed machines based on start.retry file</li>
</ul>
<pre><code class="language-zsh">ctp-retry-deploy-from-configuration
</code></pre>
<ul>
<li>Run <code>ctp-deploy-role</code> on failed machines based on start.retry file</li>
</ul>
<pre><code class="language-zsh">ctp-retry-deploy-role
</code></pre>
<h2 id="snapshot-modes">Snapshot modes</h2>
<p>Different commands for managing machine snapshots. Note that the commands might not work with all providers. In that case you will receive a message that the command not implemented for the provider. Each snapshot creation command can have be appended with <code>- live_snap=true</code> to create a snapshot of a running machine.</p>
<h3 id="ctp-snapshot">ctp-snapshot</h3>
<p>Shuts down the VM, creates a snapshot and powers the VM back on.</p>
<p><em>Example usage:</em></p>
<ul>
<li>Creates a snapshot of the VM for the given inventory_hostname with the default snapshot name</li>
</ul>
<pre><code class="language-zsh">ctp-snapshot &lt;inventory_hostname&gt;
</code></pre>
<ul>
<li>Creates a snapshot of the VM for the given inventory_hostname with the given snapshot name</li>
</ul>
<pre><code class="language-zsh">ctp-snapshot &lt;inventory_hostname&gt; -e snapshot_name=&lt;snapshot_name&gt;
</code></pre>
<h3 id="ctp-clean-snapshot">ctp-clean-snapshot</h3>
<p>Remove all existing snapshots and create a new snapshot of the VM</p>
<p><em>Example usage:</em></p>
<ul>
<li>Removes all existing snapshots and creates a new snapshot of the VM for the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-clean-snapshot &lt;inventory_hostname&gt;
</code></pre>
<ul>
<li>Removes all existing snapshots and creates a new snapshot of the VM for the given inventory_hostname with the given snapshot name</li>
</ul>
<pre><code class="language-zsh">ctp-clean-snapshot &lt;inventory_hostname&gt; -e snapshot_name=&lt;snapshot_name&gt;
</code></pre>
<h3 id="ctp-live-snapshot">ctp-live-snapshot</h3>
<p>Creates a snapshot of a running machine including memory, mostly applicable to VMware products</p>
<p><em>Example usage:</em></p>
<ul>
<li>Creates a live snapshot of the VM for the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-live-snapshot &lt;inventory_hostname&gt;
</code></pre>
<ul>
<li>Creates a live snapshot of the VM for the given inventory_hostname with the given snapshot name</li>
</ul>
<pre><code class="language-zsh">ctp-live-snapshot &lt;inventory_hostname&gt; -e snapshot_name=&lt;snapshot_name&gt;
</code></pre>
<h3 id="ctp-revert">ctp-revert</h3>
<p>Revert to the latest default snapshot or to the given snapshot name</p>
<p><em>Example usage:</em></p>
<ul>
<li>Reverts the VM for the given inventory_hostname to the latest default snapshot</li>
</ul>
<pre><code class="language-zsh">ctp-revert &lt;inventory_hostname&gt;
</code></pre>
<ul>
<li>Reverts the VM for the given inventory_hostname to the given snapshot name</li>
</ul>
<pre><code class="language-zsh">ctp-revert &lt;inventory_hostname&gt; -e snapshot_name=&lt;snapshot_name&gt;

</code></pre>
<h3 id="ctp-remove-snapshot">ctp-remove-snapshot</h3>
<p>Removing snapshot, requires <code>-e snapshot_name=snapshot_name_to_remove</code> or removes current snapshot if snapshot_name is not defined</p>
<p><em>Example usage:</em></p>
<ul>
<li>Removes the snapshot for the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-remove-snapshot &lt;inventory_hostname&gt; -e snapshot_name=snapshot_name_to_remove
</code></pre>
<h3 id="ctp-remove-all-snapshot">ctp-remove-all-snapshot</h3>
<ul>
<li>Removes all snapshots for the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-remove-all-snapshot &lt;inventory_hostname&gt;
</code></pre>
<h3 id="ctp-rename-snapshot">ctp-rename-snapshot</h3>
<p>Renaming snapshot, requires <code>-e snapshot_name=existing_snapshot_name_to_rename -e new_snapshot_name=new_snapshot_name</code></p>
<p><em>Example usage:</em></p>
<ul>
<li>Renames the snapshot for given inventory_hostname machine</li>
</ul>
<pre><code class="language-zsh">ctp-rename-snapshot &lt;inventory_hostname&gt; -e snapshot_name=existing_snapshot_name_to_rename -e new_snapshot_name=new_snapshot_name
</code></pre>
<h2 id="power-state">Power state</h2>
<p>These commands are for managing the power state of the VMs. Without connection to them over SSH. For an example using VMTools on VMware products.</p>
<h3 id="ctp-poweron">ctp-poweron</h3>
<p>Power on VM</p>
<h3 id="ctp-restart">ctp-restart</h3>
<p>Restart VM</p>
<h3 id="ctp-shutdown">ctp-shutdown</h3>
<p>Shut down VM (graceful shutdown)</p>
<h3 id="ctp-poweroff">ctp-poweroff</h3>
<p>Power off VM (ungraceful shutdown)</p>
<h3 id="ctp-reset">ctp-reset</h3>
<p>Reset VM (very ungraceful)</p>
<p><em>Example usage:</em></p>
<ul>
<li>Powers on the VM for the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-poweron &lt;inventory_hostname&gt;
</code></pre>
<ul>
<li>Restarts the VM for the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-restart &lt;inventory_hostname&gt;
</code></pre>
<ul>
<li>Shuts down the VM for the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-shutdown &lt;inventory_hostname&gt;
</code></pre>
<ul>
<li>Powers off the VM for the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-poweroff &lt;inventory_hostname&gt;
</code></pre>
<ul>
<li>Resets the VM for the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-reset &lt;inventory_hostname&gt;
</code></pre>
<h2 id="misc-commands">MISC commands</h2>
<h3 id="ctp-update-os">ctp-update-os</h3>
<p>Runs only the <code>nova.core.updates</code> role on the given targets. Useful for only updating the OS packages.</p>
<p><em>Example usage:</em></p>
<ul>
<li>Updates the OS packages for the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-update-os &lt;inventory_hostname&gt;
</code></pre>
<h3 id="ctp-list">ctp-list</h3>
<p>List the inventory_hostnames for the given project, group_var or just to check if the inventory_hostname is valid. This command is useful to use a a pre-check before running any of the other commands. You can make sure that your advanced regex is correct and you don't run the command on the wrong inventory_hostname.</p>
<p><em>Example usage:</em></p>
<ul>
<li>Checks if the inventory_hostnames exists</li>
</ul>
<pre><code class="language-zsh">ctp-list &lt;inventory_hostname&gt;
</code></pre>
<ul>
<li>Lists all of the inventory_hostnames for the given project</li>
</ul>
<pre><code class="language-zsh">ctp-list all
</code></pre>
<ul>
<li>Lists all of the inventory_hostnames for the given group_var</li>
</ul>
<pre><code class="language-zsh">ctp-list &lt;group_var&gt;
</code></pre>
<h3 id="ctp-list-vars">ctp-list-vars</h3>
<p>List (most) of the variables for the given inventory_hostname. This command is useful to check what variables are available in the given inventory_hostname. It is not a complete list of all the variables because of home some <code>host_vars</code> get loaded but it's useful when getting started with the role development.</p>
<p><em>Example usage:</em></p>
<ul>
<li>Lists the variables for the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-list-vars &lt;inventory_hostname&gt;
</code></pre>
<h3 id="ctp-rename-vm">ctp-rename-vm</h3>
<p>Renaming VM. This command is useful when the naming scheme for the VMs has changed and you want to rename some or all of them for the project.</p>
<p><em>Example usage:</em></p>
<ul>
<li>Renames the VM for the given inventory_hostname with the given values</li>
</ul>
<pre><code class="language-zsh">ctp-rename-vm &lt;inventory_hostname&gt; -e old_vm_name=&lt;old_name&gt; -e new_vm_name=&lt;new_name&gt;
</code></pre>
<ul>
<li>Renames the VM for the given inventory_hostname where the old name is the current value defined in</li>
</ul>
<pre><code class="language-zsh">cpp-rename-vm &lt;inventory_hostname&gt; -e new_vm_name=&lt;new_name&gt;the group or host vars
</code></pre>
<h3 id="ctp-get-ip">ctp-get-ip</h3>
<p>Getting the IP's and FQDN of the VM</p>
<p><em>Example usage:</em></p>
<ul>
<li>Gets the IP's and FQDN of the VM for the given inventory_hostname</li>
</ul>
<pre><code class="language-zsh">ctp-get-ip &lt;inventory_hostname&gt;
</code></pre>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
    
  </body>
</html>